# ユーザープロファイル

##　目的

このモジュールの目的は、Splunk On-Call に呼び出されたときにどのように通知されるかを制御する個人プロファイルを設定することです。

---

## 1. 連絡手段を登録する

Splunk On-Call UI に切り替え、右上のログイン名をクリックし、ドロップダウンから **Profile** を選択します。

連絡手段が正しく表示されていることを確認し、使用したい電話番号や電子メールアドレスを追加します。

---

## 2. モバイルアプリ

スマートフォンに Splunk On-Call アプリをインストールするには、お使いの携帯電話のApp Storeで Splunk On-Call を検索してのアプリを見つけてください。

出版社は VictorOps Inc. と表示されているはずです。

[![iPhone](../../images/oncall/app-store.svg){: .appstore}](https://apps.apple.com/us/app/victorops/id696974262){: target=_blank} [![Android](../../images/oncall/play-store.svg){: .appstore}](https://play.google.com/store/apps/details?id=com.victorops.androidclient&hl=en){: target=_blank}

設定のヘルプガイドを用意しています。

* [Apple](https://help.victorops.com/knowledge-base/ios-application/){: target=_blank}
* [Android](https://help.victorops.com/knowledge-base/android-devices-victorops/){: target=_blank}

アプリをインストールしてログインし、「プロフィール」ページを更新すると、「デバイス」セクションにお使いのデバイスが表示されます。

**Test push notification** ボタンをクリックして、テストメッセージを受信することを確認します。

---

## 3. パーソナルカレンダー

このリンクをクリックすると、オンコールのスケジュールをカレンダーと同期することができますが、まだ割り当てられたシフトがないため、現在は空欄になっています。

このリンクをお使いのアプリケーションにコピーして新規登録することで、カレンダーに追加することができます。

---

## 4. ページングポリシー

ページングポリシーでは、オンコール時の連絡手段を指定します。

プライマリーページングポリシーではデフォルトで、アカウントのアクティベーション時に登録した電話暗号にSMSが送信されます。

このポリシーを以下の図のように、3段階のマルチステージポリシーに設定します。

![Paging Policy](../../images/oncall/primary-paging-policy.png)

### ステップ1: プッシュ通知の送信

プライマリーページングポリシーの右上にあるポリシー編集ボタンをクリックします。

* 自分のデバイスすべてにプッシュ通知を送信します
* 5分以内に返信がない場合は、次のステップを実行します

![Step 1](../../images/oncall/pri-page-step1.png)

次のステップを追加するために、**Add a Step** クリックしてください

### Step 2: メールの送信

* [あなたのメールアドレス]に対して、Eメールを送信します
* 5分以内に返信がない場合は、次のステップを実行します

![Step 2](../../images/oncall/pri-page-step2.png)

次のステップを追加するために、**Add a Step** クリックしてください

### ステップ3: 電話をかける

* 5分ごとに、担当者であるあなたと連絡が取れるまで…
* [あなたの電話番号] に電話を掛け続けます

**Save**{: .label-button .vo-ui-button} をクリックして、ポリシーを保存します。

![Step 3](../../images/oncall/pri-page-step3.png)

---

オンコールまたはインシデントのエスカレーションパスにいるときは、時間の経過にしたがって、この順序で通知が送られます。

ページングを停止するには、インシデントをアクノレッジする必要があります。アクノレッジは以下のいずれかの方法で行います。

* 端末でプッシュ通知を展開して「Acknowledge」を選択する
* SMSに含まれる5桁のコードで応答する
* 電話中に4を押す
* Slackボタン

通知タイプの詳細については、[こちら](https://help.victorops.com/knowledge-base/notification-types/){: target=_blank}をご覧ください。

---

## 5. カスタムページングポリシー

カスタムページングポリシーでは、時間や曜日に応じてプライマリーポリシーを上書きすることができます。

例えば、夜間や週末にページが表示されると、プッシュ通知よりも先に電話がかかってくるようにすることで、より気づきやすいようにするということができます。

**Add a Policy** をクリックして新しいカスタムポリシーを作成し、以下の設定を行います。

### 5.1 夜間のカスタムポリシー

ポリシー名 夜間

* 5分ごとに、担当者と連絡が取れるまで
  * [あなたの電話番号] に電話を掛け続けます
  * Time Period: すべての7日間
  * タイムゾーン
    * 午後7時から午前9時まで

![Evening](../../images/oncall/evening.png)

**Save**{: .label-button .vo-ui-button} をクリックして、ポリシーを保存した後、もう1つ追加します。

### 5.2 週末のカスタムポリシー

ポリシー名 週末

* 5分ごとに、担当者と連絡が取れるまで
  * [あなたの電話番号] に電話を掛け続けます
  * Time Period: 土曜日と日曜日
  * タイムゾーン
    * 午前9時から午後7時まで

**Save**{: .label-button .vo-ui-button} をクリックして、ポリシーを保存します。

![Weekends](../../images/oncall/weekends.png)

---

これらのカスタムページングポリシーは、指定された時間帯にプライマリポリシーの代わりに使用されます。

しかし、管理者はこれらのカスタムポリシーを無視することができます。その方法については、後のモジュールで説明します。

最後のオプションは、リカバリー通知の設定です。

一般的には優先度が低いため、メールやプッシュ通知を送るだけの設定が一般的です。

これで、これらの設定例を使ってプロファイルが完全に設定されました。

プロファイルの設定方法については、組織によって見解が異なり、ページングポリシーやエスカレーション間の時間などのガイドラインが発行されるのが一般的です。

---

講師の指示を待ってから、次の Teams モジュールに進んでください。
